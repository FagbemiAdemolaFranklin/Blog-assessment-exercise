<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <title>blogs</title>
</head>
<body>
    <div class="blogs-page-container">
        <div class="blogs-text">
            <h1> Blogs </h1>
            <a href="/logOut" class="log-out"> LogOut </a>
        </div>
        <div class="write-blogs">
            <div class="create-blog-button-container">
                <button class="create-blog-button" id="create-blog-button" type="menu">
                    <span class="material-symbols-outlined">
                        add
                        </span>
                </button>
            </div>
            <div class="create-blogs">
                <div class="create-blogs-form-open">
                    <form action="/blogs" method="post" class="create-blogs-form">
                        <input required type="text" name="title" placeholder="Title">
                        <textarea required placeholder="Max characters 800" maxlength="800" type="text" name="content" cols="30" rows="10"></textarea>
                        <button type="submit" name="submit" value="123">
                            <span class="material-symbols-outlined">
                                send
                                </span> 
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <div class="blogs-page-inner-container">
            <div class="blogs-container">
                <% requestedBlogs.forEach(function(eachBlog){ %>
                    <% eachBlog.blog.forEach(function(blogs){ %>
                        <div class="blogs-inner-container">
                            <textarea contenteditable=false cols="30" rows="10" readonly> <%= blogs.content %> </textarea>
                            <div class="like-container">
                                <div class="like-inner-container">
                                    <form action="/blogs" method="post">
                                        <button type="submit" id="like" name="like" value="<%= eachBlog.id %>"><span class="material-symbols-outlined">
                                            heart_plus
                                        </span></button>
                                        <p> <%= blogs.likes.length %> </p>
                                    </form>
                                </div>
                                <div class="views-container">
                                    <button type="menu" onclick="event.preventDefault()"><span class="material-symbols-outlined">
                                        visibility
                                        </span></button>
                                    <p> <%= blogs.views.length %> </p>
                                </div>
                                <div class="comments-container">
                                    <div class="comment-button">
                                        <button id="comments"  onclick="event.preventDefault()" name="opencomments">
                                            <span class="material-symbols-outlined">
                                                comment
                                                </span>
                                        </button>
                                        <p> <%= blogs.comments.length %> </p>
                                    </div>
                                    <div class="comments">
                                        <form action="/blogs" method="post">
                                            <div class="comments-form-inputs">
                                                <input  required type="text" name="comment" placeholder="Add comment">
                                                <button type="submit" name="addcomment" value="<%= eachBlog.id %>" >
                                                    <span class="material-symbols-outlined">
                                                        send
                                                        </span>
                                                </button>
                                            </div>
                                            
                                        </form>
                                        <h4>Comments</h4>
                                        <% blogs.comments.forEach(function(comments){ %>
                                            <div class="comments-inner-container">
                                                <p class="user-comment"> <%= comments.user %>: </p>
                                                <p> <%= comments.comment %> </p>
                                            </div>
                                        <%})%>
                                    
                
                                    </div>
                                </div>
                            </div>
                            <p> Title: <%= blogs.title %> </p>
                            <p> Fullname: <%= blogs.author.fullname %> </p>
                            <p> Author: <%= blogs.author.username %> </p>
                            
                            
                        </div>
                    <%})%>   
                <%})%>
            </div>
        </div>
    </div>
   
    <script src="scripts/script.js"></script>
</body>
</html>